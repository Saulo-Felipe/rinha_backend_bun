// @bun
var F=(b,T)=>({part:b,store:null,inert:T!==void 0?new Map(T.map((k)=>[k.part.charCodeAt(0),k])):null,params:null,wildcardStore:null}),K=(b,T)=>({...b,part:T}),O=(b)=>({paramName:b,store:null,inert:null});class G{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g};add(b,T,k){if(typeof T!=="string")throw new TypeError("Route path must be a string");if(T==="")T="/";else if(T[0]!=="/")T=`/${T}`;this.history.push([b,T,k]);const E=T[T.length-1]==="*";if(E)T=T.slice(0,-1);const A=T.split(G.regex.static),z=T.match(G.regex.params)||[];if(A[A.length-1]==="")A.pop();let f;if(!this.root[b])f=this.root[b]=F("/");else f=this.root[b];let v=0;for(let B=0;B<A.length;++B){let y=A[B];if(B>0){const q=z[v++].slice(1);if(f.params===null)f.params=O(q);else if(f.params.paramName!==q)throw new Error(`Cannot create route "${T}" with parameter "${q}" `+"because a route already exists with a different parameter name "+`("${f.params.paramName}") in the same location`);const D=f.params;if(D.inert===null){f=D.inert=F(y);continue}f=D.inert}for(let q=0;;){if(q===y.length){if(q<f.part.length){const D=K(f,f.part.slice(q));Object.assign(f,F(y,[D]))}break}if(q===f.part.length){if(f.inert===null)f.inert=new Map;else if(f.inert.has(y.charCodeAt(q))){f=f.inert.get(y.charCodeAt(q)),y=y.slice(q),q=0;continue}const D=F(y.slice(q));f.inert.set(y.charCodeAt(q),D),f=D;break}if(y[q]!==f.part[q]){const D=K(f,f.part.slice(q)),J=F(y.slice(q));Object.assign(f,F(f.part.slice(0,q),[D,J])),f=J;break}++q}}if(v<z.length){const y=z[v].slice(1);if(f.params===null)f.params=O(y);else if(f.params.paramName!==y)throw new Error(`Cannot create route "${T}" with parameter "${y}" `+"because a route already exists with a different parameter name "+`("${f.params.paramName}") in the same location`);if(f.params.store===null)f.params.store=k;return f.params.store}if(E){if(f.wildcardStore===null)f.wildcardStore=k;return f.wildcardStore}if(f.store===null)f.store=k;return f.store}find(b,T){const k=this.root[b];if(!k)return null;return H(T,T.length,k,0)}}var H=(b,T,k,E)=>{const A=k?.part,z=E+A.length;if(A.length>1){if(z>T)return null;if(A.length<15){for(let f=1,v=E+1;f<A.length;++f,++v)if(A.charCodeAt(f)!==b.charCodeAt(v))return null}else if(b.substring(E,z)!==A)return null}if(z===T){if(k.store!==null)return{store:k.store,params:{}};if(k.wildcardStore!==null)return{store:k.wildcardStore,params:{"*":""}};return null}if(k.inert!==null){const f=k.inert.get(b.charCodeAt(z));if(f!==void 0){const v=H(b,T,f,z);if(v!==null)return v}}if(k.params!==null){const f=k.params,v=b.indexOf("/",z);if(v!==z){if(v===-1||v>=T){if(f.store!==null){const B={};return B[f.paramName]=b.substring(z,T),{store:f.store,params:B}}}else if(f.inert!==null){const B=H(b,T,f.inert,v);if(B!==null)return B.params[f.paramName]=b.substring(z,v),B}}}if(k.wildcardStore!==null)return{store:k.wildcardStore,params:{"*":b.substring(z,T)}};return null},S=G;export{S as default,G as Memoirist};

//# debugId=9F5E991AE891E51664756e2164756e21
